<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Install Chef 11 Server on CentOS 6 | jtimberman’s blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Install Chef 11 Server on CentOS 6" />
<meta name="author" content="Joshua Timberman" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A few months ago, I posted briefly on how to install Chef 10 server on CentOS. This post revisits the process for Chef 11." />
<meta property="og:description" content="A few months ago, I posted briefly on how to install Chef 10 server on CentOS. This post revisits the process for Chef 11." />
<link rel="canonical" href="/blog/2013/02/10/install-chef-11-server-on-centos-6" />
<meta property="og:url" content="/blog/2013/02/10/install-chef-11-server-on-centos-6" />
<meta property="og:site_name" content="jtimberman’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-02-10T07:57:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Install Chef 11 Server on CentOS 6" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Joshua Timberman"},"description":"A few months ago, I posted briefly on how to install Chef 10 server on CentOS. This post revisits the process for Chef 11.","url":"/blog/2013/02/10/install-chef-11-server-on-centos-6","headline":"Install Chef 11 Server on CentOS 6","@type":"BlogPosting","dateModified":"2013-02-10T07:57:00+00:00","datePublished":"2013-02-10T07:57:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2013/02/10/install-chef-11-server-on-centos-6"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="jtimberman's blog" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-26031299-1"></script>
<script>
  window['ga-disable-UA-26031299-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-26031299-1');
</script>

</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">jtimberman&#39;s blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Install Chef 11 Server on CentOS 6</h1>
    <p class="post-meta"><time class="dt-published" datetime="2013-02-10T07:57:00+00:00" itemprop="datePublished">
        Feb 10, 2013
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>A few months ago, I posted briefly on
<a href="https://jtimberman.housepub.org/blog/2012/11/17/install-chef-10-server-on-centos/">how to install Chef 10 server on CentOS</a>.
This post revisits the process for Chef 11.</p>

<p>These steps were performed on a default CentOS 6.3 server install.</p>

<p>First, navigate to the
<a href="http://www.opscode.com/chef/install">Chef install page</a> to get the
package download URL. Use the form on the “Chef Server” tab to select
the appropriate drop-down items for your system.</p>

<p>Install the package from the given URL.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm -Uvh https://opscode-omnitruck-release.s3.amazonaws.com/el/6/x86_64/chef-server-11.0.4-1.el6.x86_64.rpm
</code></pre></div></div>

<p>The package just puts the bits on disk (in <code class="language-plaintext highlighter-rouge">/opt/chef-server</code>). The
next step is to configure the Chef Server and start it.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% chef-server-ctl reconfigure
</code></pre></div></div>

<p>This runs the embedded <code class="language-plaintext highlighter-rouge">chef-solo</code> with the included cookbooks, and
sets up everything required - Erchef, RabbitMQ, PostgreSQL, etc.</p>

<p>Next, run the Opscode Pedant test suite. This will verify that
everything is working.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% chef-server-ctl test
</code></pre></div></div>

<p>Copy the default admin user’s key and the validator key to your local
workstation system that you have Chef <em>client</em> installed on, and
create a new user for yourself with knife. You’ll need version 11.2.0.
The key files on the Chef Server are readable only by root.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp root@chef-server:/etc/chef-server/admin.pem .
scp root@chef-server:/etc/chef-server/chef-validator.pem .
</code></pre></div></div>

<p>Use <code class="language-plaintext highlighter-rouge">knife configure -i</code> to create an initial <code class="language-plaintext highlighter-rouge">~/.chef/knife.rb</code> and
new administrative API user for yourself. Use the FQDN of your newly
installed Chef Server, with HTTPS. The validation key needs to be
copied over from the Chef Server from
<code class="language-plaintext highlighter-rouge">/etc/chef-server/chef-validator.pem</code> to <code class="language-plaintext highlighter-rouge">~/.chef</code> to use it for
automatically bootstrapping nodes with <code class="language-plaintext highlighter-rouge">knife bootstrap</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% knife configure -i
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">.chef/knife.rb</code> file should look something like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">log_level</span>                <span class="ss">:info</span>
<span class="n">log_location</span>             <span class="no">STDOUT</span>
<span class="n">node_name</span>                <span class="s1">'jtimberman'</span>
<span class="n">client_key</span>               <span class="s1">'/home/jtimberman/.chef/jtimberman.pem'</span>
<span class="n">validation_client_name</span>   <span class="s1">'chef-validator'</span>
<span class="n">validation_key</span>           <span class="s1">'/home/jtimberman/.chef/chef-validator.pem'</span>
<span class="n">chef_server_url</span>          <span class="s1">'https://chef-server.example.com'</span>
<span class="n">syntax_check_cache_path</span>  <span class="s1">'/home/jtimberman/.chef/syntax_check_cache'</span>
</code></pre></div></div>

<p>Your Chef Server is now ready to use. Test connectivity as your user
with knife:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% knife client list
chef-validator
chef-webui
% knife user list
admin
jtimberman
</code></pre></div></div>

<p>In previous versions of Open Source Chef Server, users were API
clients. In Chef 11, users are separate entities on the Server.</p>

<p>The <code class="language-plaintext highlighter-rouge">chef-server-ctl</code> command is used on the Chef Server system for
management. It has built-in help (<code class="language-plaintext highlighter-rouge">-h</code>) that will display the various
sub-commands.</p>

  </div><a class="u-url" href="/blog/2013/02/10/install-chef-11-server-on-centos-6" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/%20/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">jtimberman&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Copyright &copy; Joshua Timberman</li><li><a class="u-email" href="mailto:blog@housepub.org">blog@housepub.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jekyll" title="jekyll"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/jekyllrb" title="jekyllrb"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Operations, Automation, Deployment, Workflows, DevOps; see my About page for ways you can support me.</p>
      </div>
    </div>

    <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="Creative
      Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/us/80x15.png" /></a> This
    work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons
      Attribution-ShareAlike 3.0 United States License</a>.
  </div>

</footer></body>

</html>
